{"ast":null,"code":"import api from './api';\nexport const authService = {\n  async login(email, password) {\n    const response = await api.post('/auth/login/', {\n      email,\n      password\n    });\n    const {\n      access,\n      refresh,\n      user,\n      organization\n    } = response.data;\n    localStorage.setItem('accessToken', access);\n    localStorage.setItem('refreshToken', refresh);\n    localStorage.setItem('user', JSON.stringify(user));\n    if (organization) {\n      localStorage.setItem('organization', JSON.stringify(organization));\n    }\n    return {\n      user,\n      organization\n    };\n  },\n  async register(data) {\n    const response = await api.post('/auth/register/', data);\n    const {\n      tokens,\n      user,\n      organization\n    } = response.data;\n    localStorage.setItem('accessToken', tokens.access);\n    localStorage.setItem('refreshToken', tokens.refresh);\n    localStorage.setItem('user', JSON.stringify(user));\n    if (organization) {\n      localStorage.setItem('organization', JSON.stringify(organization));\n    }\n    return {\n      user,\n      organization\n    };\n  },\n  async logout() {\n    try {\n      const refresh = localStorage.getItem('refreshToken');\n      await api.post('/auth/logout/', {\n        refresh\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      localStorage.removeItem('user');\n      localStorage.removeItem('organization');\n    }\n  },\n  async getMe() {\n    const response = await api.get('/auth/me/');\n    return response.data;\n  },\n  async updateProfile(data) {\n    const response = await api.put('/auth/me/', data);\n    localStorage.setItem('user', JSON.stringify(response.data));\n    return response.data;\n  },\n  getStoredUser() {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user) : null;\n  },\n  getStoredOrganization() {\n    const org = localStorage.getItem('organization');\n    return org ? JSON.parse(org) : null;\n  },\n  isAuthenticated() {\n    return !!localStorage.getItem('accessToken');\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","login","email","password","response","post","access","refresh","user","organization","data","localStorage","setItem","JSON","stringify","register","tokens","logout","getItem","error","console","removeItem","getMe","get","updateProfile","put","getStoredUser","parse","getStoredOrganization","org","isAuthenticated"],"sources":["C:/Users/mateo/WORK SPACE/UDLA/7 Semestre/Ingenieria WEB/PROYECTO INTEGRADOR/Django-React/SISTEMA_AUDITORIAS/frontend/src/services/authService.js"],"sourcesContent":["import api from './api';\n\nexport const authService = {\n  async login(email, password) {\n    const response = await api.post('/auth/login/', { email, password });\n    const { access, refresh, user, organization } = response.data;\n    \n    localStorage.setItem('accessToken', access);\n    localStorage.setItem('refreshToken', refresh);\n    localStorage.setItem('user', JSON.stringify(user));\n    if (organization) {\n      localStorage.setItem('organization', JSON.stringify(organization));\n    }\n    \n    return { user, organization };\n  },\n  \n  async register(data) {\n    const response = await api.post('/auth/register/', data);\n    const { tokens, user, organization } = response.data;\n    \n    localStorage.setItem('accessToken', tokens.access);\n    localStorage.setItem('refreshToken', tokens.refresh);\n    localStorage.setItem('user', JSON.stringify(user));\n    if (organization) {\n      localStorage.setItem('organization', JSON.stringify(organization));\n    }\n    \n    return { user, organization };\n  },\n  \n  async logout() {\n    try {\n      const refresh = localStorage.getItem('refreshToken');\n      await api.post('/auth/logout/', { refresh });\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      localStorage.removeItem('user');\n      localStorage.removeItem('organization');\n    }\n  },\n  \n  async getMe() {\n    const response = await api.get('/auth/me/');\n    return response.data;\n  },\n  \n  async updateProfile(data) {\n    const response = await api.put('/auth/me/', data);\n    localStorage.setItem('user', JSON.stringify(response.data));\n    return response.data;\n  },\n  \n  getStoredUser() {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user) : null;\n  },\n  \n  getStoredOrganization() {\n    const org = localStorage.getItem('organization');\n    return org ? JSON.parse(org) : null;\n  },\n  \n  isAuthenticated() {\n    return !!localStorage.getItem('accessToken');\n  },\n};\n\nexport default authService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}